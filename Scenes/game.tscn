[gd_scene load_steps=8 format=3 uid="uid://2q322tyxvreq"]

[ext_resource type="PackedScene" uid="uid://bjoeblbdmvsm1" path="res://Scenes/player.tscn" id="1_8oosl"]
[ext_resource type="Script" path="res://Scripts/MainGame.cs" id="1_a0sd4"]
[ext_resource type="TileSet" uid="uid://cvjqx1uc53fui" path="res://Resources/TileSet.tres" id="2_g7o1g"]
[ext_resource type="Script" path="res://Scripts/Board.cs" id="3_7j6rw"]
[ext_resource type="Texture2D" uid="uid://bjs2ohgkl7o6c" path="res://Resources/G_5.png" id="6_o01tp"]
[ext_resource type="Script" path="res://Scripts/PlayerCamera.cs" id="6_yssce"]
[ext_resource type="Script" path="res://Scripts/PlayerTwoSubViewport.cs" id="7_k6tni"]

[node name="Game" type="Node2D"]

[node name="Label" type="Label" parent="."]
z_index = 15
offset_left = 318.0
offset_right = 403.0
offset_bottom = 23.0
text = "Player One
"
horizontal_alignment = 1

[node name="Label2" type="Label" parent="."]
z_index = 15
offset_left = 1038.0
offset_right = 1123.0
offset_bottom = 23.0
text = "Player Two
"
horizontal_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="."]
clip_contents = true
offset_right = 724.0
offset_bottom = 720.0
theme_override_constants/separation = 0

[node name="SubViewportContainer" type="SubViewportContainer" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_stretch_ratio = 0.0

[node name="BlindnessSprite2" type="Sprite2D" parent="HBoxContainer/SubViewportContainer"]
position = Vector2(360, 360)
scale = Vector2(5.625, 5.625)
texture = ExtResource("6_o01tp")

[node name="PlayerOneSubViewport" type="SubViewport" parent="HBoxContainer/SubViewportContainer"]
handle_input_locally = false
size = Vector2i(720, 720)
render_target_update_mode = 4

[node name="MainGame" type="Node2D" parent="HBoxContainer/SubViewportContainer/PlayerOneSubViewport" node_paths=PackedStringArray("_playerOneCamera", "_playerTwoCamera", "_playerOne", "_playerTwo", "_board")]
script = ExtResource("1_a0sd4")
_playerOneCamera = NodePath("../PlayerOneCamera")
_playerTwoCamera = NodePath("../../../SubViewportContainer2/PlayerTwoSubViewport/PlayerTwoCamera")
_playerOne = NodePath("Player1")
_playerTwo = NodePath("Player2")
_board = NodePath("Board")

[node name="Board" type="TileMapLayer" parent="HBoxContainer/SubViewportContainer/PlayerOneSubViewport/MainGame"]
tile_set = ExtResource("2_g7o1g")
script = ExtResource("3_7j6rw")

[node name="Player1" parent="HBoxContainer/SubViewportContainer/PlayerOneSubViewport/MainGame" node_paths=PackedStringArray("Board", "_oppositePlayer", "_playerCamera", "_blindnessSprite") instance=ExtResource("1_8oosl")]
collision_layer = 4
collision_mask = 1
Leftkey = "Left"
RightKey = "Right"
UpKey = "Up"
DownKey = "Down"
ShiftCameraKey = "ShiftCamera"
SkillKey = "Skill"
Board = NodePath("../Board")
_currentPlayerNum = 1
_oppositePlayer = NodePath("../Player2")
_playerCamera = NodePath("../../PlayerOneCamera")
_blindnessSprite = NodePath("../../../../SubViewportContainer2/BlindnessSprite")

[node name="Player2" parent="HBoxContainer/SubViewportContainer/PlayerOneSubViewport/MainGame" node_paths=PackedStringArray("Board", "_oppositePlayer", "_playerCamera", "_blindnessSprite") instance=ExtResource("1_8oosl")]
collision_mask = 1
Leftkey = "Left2"
RightKey = "Right2"
UpKey = "Up2"
DownKey = "Down2"
ShiftCameraKey = "ShiftCamera2"
SkillKey = "Skill2"
Board = NodePath("../Board")
_currentPlayerNum = 2
_oppositePlayer = NodePath("../Player1")
_playerCamera = NodePath("../../../../SubViewportContainer2/PlayerTwoSubViewport/PlayerTwoCamera")
_blindnessSprite = NodePath("../../../BlindnessSprite2")

[node name="PlayerOneCamera" type="Camera2D" parent="HBoxContainer/SubViewportContainer/PlayerOneSubViewport" node_paths=PackedStringArray("_player", "_board")]
zoom = Vector2(0.5, 0.5)
position_smoothing_speed = 20.0
script = ExtResource("6_yssce")
_player = NodePath("../MainGame/Player1")
_board = NodePath("../MainGame/Board")

[node name="SubViewportContainer2" type="SubViewportContainer" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 8
size_flags_stretch_ratio = 0.0

[node name="BlindnessSprite" type="Sprite2D" parent="HBoxContainer/SubViewportContainer2"]
position = Vector2(360, 360)
scale = Vector2(5.625, 5.625)
texture = ExtResource("6_o01tp")

[node name="PlayerTwoSubViewport" type="SubViewport" parent="HBoxContainer/SubViewportContainer2" node_paths=PackedStringArray("_subViewport")]
handle_input_locally = false
size = Vector2i(720, 720)
render_target_update_mode = 4
script = ExtResource("7_k6tni")
_subViewport = NodePath("../../SubViewportContainer/PlayerOneSubViewport")

[node name="PlayerTwoCamera" type="Camera2D" parent="HBoxContainer/SubViewportContainer2/PlayerTwoSubViewport" node_paths=PackedStringArray("_player", "_board")]
zoom = Vector2(0.5, 0.5)
position_smoothing_speed = 10.0
script = ExtResource("6_yssce")
_player = NodePath("../../../SubViewportContainer/PlayerOneSubViewport/MainGame/Player2")
_board = NodePath("../../../SubViewportContainer/PlayerOneSubViewport/MainGame/Board")
